parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"Sp40":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.drawGL=x;var n="\n#version 100\nvoid main() {\ngl_Position = vec4(0.0, 0.0, 0.0, 1.0);\ngl_PointSize = 600.0;\n}",e="\n#ifdef GL_ES\nprecision highp float;\n#endif\n\n#extension GL_OES_standard_derivatives : enable\n#extension GL_ARB_gpu_shader_fp64 : enable\n\nuniform float time;\nuniform vec2 mouse;\nuniform vec2 resolution;\nuniform float scaleX;\nuniform float scaleY;\nuniform float gLEFT;\nuniform float gTOP;\n\n// hsv2rgb source: https://stackoverflow.com/a/17897228\n// All components are in the range [0â€¦1], including hue.\nvec3 hsv2rgb(vec3 c)\n{\n    vec4 K = vec4(1.0, 2.0 / 3.0, 1.0 / 3.0, 3.0);\n    vec3 p = abs(fract(c.xxx + K.xyz) * 6.0 - K.www);\n    return c.z * mix(K.xxx, clamp(p - K.xxx, 0.0, 1.0), c.y);\n}\n\nvec3 mandelbrot(vec2 pos){\n  float zx = pos.x * scaleX + gLEFT;\n  float zy = pos.y * scaleY + gTOP;\n  \n  const int maxIter = 1024;\n  \n  float cx = zx * 1.0;\n  float cy = zy * 1.0;\n  \n  float count = 0.0;\n  \n  for(int i = 0; i < maxIter; ++i){\n    if (zx * zx + zy * zy > 4.0) break;\n    \n    float temp = zx * zx - zy * zy;\n    \n    zy = 2.0 * zx * zy + cy;\n    zx = temp + cx;\n    \n    count += 1.0;\n  }\n  if (count == float(maxIter)) return vec3(0.0, 0.0, 0.0);\n  float smoothingMagic = 1.0 - log( (log2(zy * zy + zx * zx) / 2.0) / log(2.0) ) / log(2.0);\n  return hsv2rgb(vec3((count + smoothingMagic) / 100.0, 0.9, 1.0));\n}\n\nvoid main( void ) {\n  vec2 position = gl_FragCoord.xy / resolution;\n  vec3 color = mandelbrot(position);\n  gl_FragColor = vec4(color, 1.0 );\n}",r=s(document.getElementById("canvas2"));r.viewport(0,0,r.drawingBufferWidth,r.drawingBufferHeight),r.clearColor(0,0,0,1),r.clear(r.COLOR_BUFFER_BIT);var o=d(r,n,r.VERTEX_SHADER),t=d(r,e,r.FRAGMENT_SHADER),a=v(r,o,t),i=r.getUniformLocation(a,"resolution");r.uniform2f(i,600,400),console.log(i);var c=r.getUniformLocation(a,"scaleX");r.uniform1f(c,3);var f=r.getUniformLocation(a,"gLEFT");r.uniform1f(f,-2);var l=r.getUniformLocation(a,"scaleY");r.uniform1f(l,2);var g=r.getUniformLocation(a,"gTOP");r.uniform1f(g,-1),r.enableVertexAttribArray(0);var u=r.createBuffer();function m(n,e,r){n.useProgram(null),e&&n.deleteBuffer(e),r&&n.deleteProgram(r)}function s(n){return n.width=n.clientWidth,n.height=n.clientHeight,n.getContext("webgl")}function d(n,e,r){var o=n.createShader(r);return n.shaderSource(o,e),n.compileShader(o),o}function v(n,e,r){var o=n.createProgram();if(n.attachShader(o,e),n.attachShader(o,r),n.linkProgram(o),n.detachShader(o,e),n.detachShader(o,r),n.deleteShader(e),n.deleteShader(r),!n.getProgramParameter(o,n.LINK_STATUS)){var t=n.getProgramInfoLog(o);throw n.useProgram(null),n.deleteProgram(o),new Error("Shader program did not link successfully. Error log: "+t)}return n.useProgram(o),o}function x(n,e,o,t,i,c){var f=o,l=i-o,g=t,u=c-t,m=r.getUniformLocation(a,"resolution");r.uniform2f(m,n,e);var s=r.getUniformLocation(a,"scaleX");r.uniform1f(s,l);var d=r.getUniformLocation(a,"gLEFT");r.uniform1f(d,f);var v=r.getUniformLocation(a,"scaleY");r.uniform1f(v,u);var x=r.getUniformLocation(a,"gTOP");r.uniform1f(x,g),r.enableVertexAttribArray(0);var h=r.createBuffer();r.bindBuffer(r.ARRAY_BUFFER,h),r.vertexAttribPointer(0,1,r.FLOAT,!1,0,0),r.drawArrays(r.POINTS,0,1)}r.bindBuffer(r.ARRAY_BUFFER,u),r.vertexAttribPointer(0,1,r.FLOAT,!1,0,0),r.drawArrays(r.POINTS,0,1);
},{}],"H99C":[function(require,module,exports) {
"use strict";var e=require("./shader.js");function t(e){return o(e)||r(e)||n()}function n(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function r(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function o(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}var a=document.getElementById("canvas"),i=document.getElementById("canvas2"),u=a.getContext("2d"),f=u.getImageData(0,0,a.width,a.height),l=a.clientWidth,c=a.clientHeight;console.log(l,c);var s=[{r:.2361513689220573,i:-.5210970613723728},{r:.23662026741217732,i:-.5207844623789595}],v=function(e){var t=e[1].r-e[0].r,n=e[1].i-e[0].i,r=e[0].r,o=e[1].i,a=t/(l-1),i=-n/(c-1);return function(e,t){return{r:t*a+r,i:e*i+o}}},d=function(e,t){return{r:e.r+t.r,i:e.i+t.i}},m=function(e,t){return{r:e.r*t,i:e.i*t}},g=function(e,t){var n=0,r=0,o=0,a=0,i=0;for(i=0;i<1024&&!(r+o>4);i++)a*=n,a+=a,r=(n=r-o+e)*n,o=(a+=t)*a;return 1024===i?i:i+(1-Math.log(Math.log2(r+o)/2/Math.log(2))/Math.log(2))};function p(e,t,n){var r,o,a,i,u,f,l,c;switch(1===arguments.length&&(t=e.s,n=e.v,e=e.h),f=n*(1-t),l=n*(1-(u=6*e-(i=Math.floor(6*e)))*t),c=n*(1-(1-u)*t),i%6){case 0:r=n,o=c,a=f;break;case 1:r=l,o=n,a=f;break;case 2:r=f,o=n,a=c;break;case 3:r=f,o=l,a=n;break;case 4:r=c,o=f,a=n;break;case 5:r=n,o=f,a=l}return{r:Math.round(255*r),g:Math.round(255*o),b:Math.round(255*a)}}var h=function(e,t,n,r,o,a,i){var u,f=0,l=n,c=(o-n)/(e-1),s=a-r,v=a,d=-s/(t-1);document.getElementById("scale").value=(2/s).toExponential(2);for(var m=0;m<t;m++)for(var h=0;h<e;h++){var y=Math.max(0,g(h*c+l,m*d+v));u=1024===y?{r:0,g:0,b:0}:p(y/100,.9,1),i[f]=u.r,i[f+1]=u.g,i[f+2]=u.b,i[f+3]=255,f+=4}},y=function(){var e=performance.now();h(l,c,s[0].r,s[0].i,s[1].r,s[1].i,f.data),console.log("draw"),u.putImageData(f,0,0);var t=performance.now();document.getElementById("ms").value=Math.floor(t-e),console.log(JSON.stringify(s))};y(),y(),y();var E=function(){var t=performance.now();(0,e.drawGL)(l,c,s[0].r,s[0].i,s[1].r,s[1].i),console.log("draw2");var n=performance.now();document.getElementById("ms2").value=Math.floor(n-t),console.log(JSON.stringify(s));var r=s[1].i-s[0].i;document.getElementById("scale2").value=(2/r).toExponential(2)};E(),a.addEventListener("wheel",function(e){var t=v(s)(e.offsetY,e.offsetX),n=m(t,-1);e.preventDefault(),s[0]=d(s[0],n),s[1]=d(s[1],n);var r=Math.max(1+.01*e.deltaY,.7);s[0]=m(s[0],r),s[1]=m(s[1],r),s[0]=d(s[0],t),s[1]=d(s[1],t),y(),E()}),i.addEventListener("wheel",function(e){var t=v(s)(e.offsetY,e.offsetX),n=m(t,-1);e.preventDefault(),s[0]=d(s[0],n),s[1]=d(s[1],n);var r=Math.max(1+.01*e.deltaY,.7);s[0]=m(s[0],r),s[1]=m(s[1],r),s[0]=d(s[0],t),s[1]=d(s[1],t),E()});var w=null,b=!1;function M(e,t,n,r){var o,a,i;return function(){if(i=this,a=Array.prototype.slice.call(arguments),!o||!n&&!r){if(!n)return u(),o=setTimeout(function(){u(),e.apply(i,a)},t);o=setTimeout(u,t),e.apply(i,a)}function u(){clearTimeout(o),o=null}}}a.addEventListener("mousemove",M(function(e){var n=v(s),r=n(e.offsetY,e.offsetX);if(document.getElementById("output").value=g(r.r,r.i).toFixed(2),b){if(w){var o=n.apply(void 0,t(w)),a=d(m(r,-1),o);s[0]=d(s[0],a),s[1]=d(s[1],a)}w=[e.offsetY,e.offsetX],y(),E()}e.preventDefault()}),16),a.addEventListener("mousedown",function(e){b=!0}),i.addEventListener("mousemove",M(function(e){var n=v(s),r=n(e.offsetY,e.offsetX);if(document.getElementById("output2").value=g(r.r,r.i).toFixed(2),b){if(w){var o=n.apply(void 0,t(w)),a=d(m(r,-1),o);s[0]=d(s[0],a),s[1]=d(s[1],a)}w=[e.offsetY,e.offsetX],E()}e.preventDefault()}),16),i.addEventListener("mousedown",function(e){b=!0}),document.addEventListener("mouseup",function(e){b=!1,w=null});
},{"./shader.js":"Sp40"}]},{},["H99C"], null)
//# sourceMappingURL=src.2865ff67.js.map