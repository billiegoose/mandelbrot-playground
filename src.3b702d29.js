parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"GbpT":[function(require,module,exports) {
"use strict";function e(e,r,a){var t,s,o,c,n,u,b,h;switch(1===arguments.length&&(r=e.s,a=e.v,e=e.h),u=a*(1-r),b=a*(1-(n=6*e-(c=Math.floor(6*e)))*r),h=a*(1-(1-n)*r),c%6){case 0:t=a,s=h,o=u;break;case 1:t=b,s=a,o=u;break;case 2:t=u,s=a,o=h;break;case 3:t=u,s=b,o=a;break;case 4:t=h,s=u,o=a;break;case 5:t=a,s=u,o=b}return{r:Math.round(255*t),g:Math.round(255*s),b:Math.round(255*o)}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.HSVtoRGB=e;
},{}],"Sp40":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.drawGL=x;var r="\n#version 100\nvoid main() {\ngl_Position = vec4(0.0, 0.0, 0.0, 1.0);\ngl_PointSize = 600.0;\n}",n="\n#ifdef GL_ES\nprecision highp float;\n#endif\n\nuniform float time;\nuniform vec2 mouse;\nuniform vec2 resolution;\nuniform float scaleX;\nuniform float scaleY;\nuniform float gLEFT;\nuniform float gTOP;\n\n// hsv2rgb source: https://stackoverflow.com/a/17897228\n// All components are in the range [0â€¦1], including hue.\nvec3 hsv2rgb(vec3 c)\n{\n    vec4 K = vec4(1.0, 2.0 / 3.0, 1.0 / 3.0, 3.0);\n    vec3 p = abs(fract(c.xxx + K.xyz) * 6.0 - K.www);\n    return c.z * mix(K.xxx, clamp(p - K.xxx, 0.0, 1.0), c.y);\n}\n\nvec3 mandelbrot(vec2 pos){\n  float zx = pos.x * scaleX + gLEFT;\n  float zy = pos.y * scaleY + gTOP;\n  \n  const int maxIter = 1024;\n  \n  float cx = zx * 1.0;\n  float cy = zy * 1.0;\n  \n  float count = 0.0;\n  \n  for(int i = 0; i < maxIter; ++i){\n    if (zx * zx + zy * zy > 4.0) break;\n    \n    float temp = zx * zx - zy * zy;\n    \n    zy = 2.0 * zx * zy + cy;\n    zx = temp + cx;\n    \n    count += 1.0;\n  }\n  if (count == float(maxIter)) return vec3(0.0, 0.0, 0.0);\n  float smoothingMagic = 1.0 - log( (log2(zy * zy + zx * zx) / 2.0) / log(2.0) ) / log(2.0);\n  return hsv2rgb(vec3((count + smoothingMagic) / 100.0, 0.9, 1.0));\n}\n\nvoid main( void ) {\n  vec2 position = gl_FragCoord.xy / resolution;\n  vec3 color = mandelbrot(position);\n  gl_FragColor = vec4(color, 1.0 );\n}",e=s(document.getElementById("canvas2"));e.viewport(0,0,e.drawingBufferWidth,e.drawingBufferHeight),e.clearColor(0,0,0,1),e.clear(e.COLOR_BUFFER_BIT);var o=v(e,r,e.VERTEX_SHADER),t=v(e,n,e.FRAGMENT_SHADER),a=d(e,o,t),i=e.getUniformLocation(a,"resolution");e.uniform2f(i,600,400),console.log(i);var c=e.getUniformLocation(a,"scaleX");e.uniform1f(c,3);var f=e.getUniformLocation(a,"gLEFT");e.uniform1f(f,-2);var l=e.getUniformLocation(a,"scaleY");e.uniform1f(l,2);var g=e.getUniformLocation(a,"gTOP");e.uniform1f(g,-1),e.enableVertexAttribArray(0);var u=e.createBuffer();function m(r,n,e){r.useProgram(null),n&&r.deleteBuffer(n),e&&r.deleteProgram(e)}function s(r){return r.width=r.clientWidth,r.height=r.clientHeight,r.getContext("webgl")}function v(r,n,e){var o=r.createShader(e);return r.shaderSource(o,n),r.compileShader(o),o}function d(r,n,e){var o=r.createProgram();if(r.attachShader(o,n),r.attachShader(o,e),r.linkProgram(o),r.detachShader(o,n),r.detachShader(o,e),r.deleteShader(n),r.deleteShader(e),!r.getProgramParameter(o,r.LINK_STATUS)){var t=r.getProgramInfoLog(o);throw r.useProgram(null),r.deleteProgram(o),new Error("Shader program did not link successfully. Error log: "+t)}return r.useProgram(o),o}function x(r,n,o,t,i,c){var f=o,l=i-o,g=t,u=c-t,m=e.getUniformLocation(a,"resolution");e.uniform2f(m,r,n);var s=e.getUniformLocation(a,"scaleX");e.uniform1f(s,l);var v=e.getUniformLocation(a,"gLEFT");e.uniform1f(v,f);var d=e.getUniformLocation(a,"scaleY");e.uniform1f(d,u);var x=e.getUniformLocation(a,"gTOP");e.uniform1f(x,g),e.enableVertexAttribArray(0);var h=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,h),e.vertexAttribPointer(0,1,e.FLOAT,!1,0,0),e.drawArrays(e.POINTS,0,1)}e.bindBuffer(e.ARRAY_BUFFER,u),e.vertexAttribPointer(0,1,e.FLOAT,!1,0,0),e.drawArrays(e.POINTS,0,1);
},{}],"A0PK":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.iter=void 0;var t=function(t,e){var r=0,o=0,a=0,i=0,l=0;for(l=0;l<1024&&!(o+a>4);l++)i*=r,i+=i,o=(r=o-a+t)*r,a=(i+=e)*i;return 1024===l?l:l+(1-Math.log(Math.log2(o+a)/2/Math.log(2))/Math.log(2))};exports.iter=t;
},{}],"0hCt":[function(require,module,exports) {
"use strict";function e(e,t,o,r){var u,i,n;return function(){if(n=this,i=Array.prototype.slice.call(arguments),!u||!o&&!r){if(!o)return c(),u=setTimeout(function(){c(),e.apply(n,i)},t);u=setTimeout(c,t),e.apply(n,i)}function c(){clearTimeout(u),u=null}}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.debounce=e;
},{}],"kmGl":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.mult=exports.add=void 0;var r=function(r,e){return{r:r.r+e.r,i:r.i+e.i}};exports.add=r;var e=function(r,e){return{r:r.r*e,i:r.i*e}};exports.mult=e;
},{}],"XMyx":[function(require,module,exports) {
"use strict";function r(r,e,t,i){var o=i.WIDTH,s=i.HEIGHT,u=t[1].r-t[0].r,n=t[1].i-t[0].i;return{r:r*(u/(o-1))+t[0].r,i:e*(-n/(s-1))+t[1].i}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.lerp2d=r;
},{}],"ruDW":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.zoom=void 0;var e=require("./complex.js"),r=require("./lerp2d.js"),d=function(d,t,o,a,u){var l=u.WIDTH,s=u.HEIGHT,m=(0,r.lerp2d)(d,t,a,{WIDTH:l,HEIGHT:s}),p=(0,e.mult)(m,-1);a[0]=(0,e.add)(a[0],p),a[1]=(0,e.add)(a[1],p);var i=Math.max(1+.01*o,.7);return a[0]=(0,e.mult)(a[0],i),a[1]=(0,e.mult)(a[1],i),a[0]=(0,e.add)(a[0],m),a[1]=(0,e.add)(a[1],m),a};exports.zoom=d;
},{"./complex.js":"kmGl","./lerp2d.js":"XMyx"}],"yEf8":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.evalPoint=void 0;var e=require("./lerp2d.js"),r=require("./iter.js"),t=function(t,i,o,s){var u=s.WIDTH,l=s.HEIGHT,n=(0,e.lerp2d)(t,i,o,{WIDTH:u,HEIGHT:l});return(0,r.iter)(n.r,n.i)};exports.evalPoint=t;
},{"./lerp2d.js":"XMyx","./iter.js":"A0PK"}],"P0Gq":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.pan=void 0;var e=require("./lerp2d.js"),r=require("./complex"),d=function(d,p,t,H,a,o){var u=o.WIDTH,l=o.HEIGHT,s=(0,e.lerp2d)(d,p,a,{WIDTH:u,HEIGHT:l}),i=(0,e.lerp2d)(t,H,a,{WIDTH:u,HEIGHT:l}),n=(0,r.add)((0,r.mult)(s,-1),i);return a[0]=(0,r.add)(a[0],n),a[1]=(0,r.add)(a[1],n),a};exports.pan=d;
},{"./lerp2d.js":"XMyx","./complex":"kmGl"}],"H99C":[function(require,module,exports) {
"use strict";var e=require("./utils/HSVtoRGB.js"),t=require("./shader.js"),n=require("./utils/iter.js"),o=require("./utils/debounce.js"),a=require("./utils/zoom.js"),r=require("./utils/evalPoint.js"),s=require("./utils/pan.js"),u=navigator.scheduling&&navigator.scheduling.isInputPending,f=document.getElementById("canvas"),i=document.getElementById("canvas2"),d=f.getContext("2d"),l=d.getImageData(0,0,f.width,f.height),c=f.clientWidth,v=f.clientHeight;console.log(c,v);var m=document.getElementById("canvas_worker"),g=m.transferControlToOffscreen(),I=new Worker("worker.69c87948.js");I.postMessage({WIDTH:c,HEIGHT:v,canvas:g},[g]);var E=[{r:.2361513689220573,i:-.5210970613723728},{r:.23662026741217732,i:-.5207844623789595}],H=function(t,o,a,r,s,f,i){var d,l=0,c=a,v=(s-a)/(t-1),m=f-r,g=f,I=-m/(o-1);document.getElementById("scale").value=(2/m).toExponential(2);for(var E=0;E<o;E++){for(var H=0;H<t;H++){var p=Math.max(0,(0,n.iter)(H*v+c,E*I+g));d=1024===p?{r:0,g:0,b:0}:(0,e.HSVtoRGB)(p/100,.9,1),i[l]=d.r,i[l+1]=d.g,i[l+2]=d.b,i[l+3]=255,l+=4}if(u){if(navigator.scheduling.isInputPending(["wheel"]))return console.log("wheel break!"),!1;if(w&&navigator.scheduling.isInputPending(["mousemove"])&&!navigator.scheduling.isInputPending(["mouseup"]))return!1}}return!0},p=function(){var e=performance.now();if(H(c,v,E[0].r,E[0].i,E[1].r,E[1].i,l.data)){d.putImageData(l,0,0);var t=performance.now();document.getElementById("ms").value=Math.floor(t-e),console.log(JSON.stringify(E))}};p();var T=function(){var e=performance.now();(0,t.drawGL)(c,v,E[0].r,E[0].i,E[1].r,E[1].i);var n=performance.now();document.getElementById("ms2").value=Math.floor(n-e),console.log(JSON.stringify(E));var o=E[1].i-E[0].i;document.getElementById("scale2").value=(2/o).toExponential(2)};T(),f.addEventListener("wheel",function(e){e.preventDefault(),E=(0,a.zoom)(e.offsetX,e.offsetY,e.deltaY,E,{WIDTH:c,HEIGHT:v}),p(),T(),y()}),i.addEventListener("wheel",function(e){e.preventDefault(),E=(0,a.zoom)(e.offsetX,e.offsetY,e.deltaY,E,{WIDTH:c,HEIGHT:v}),T(),y()}),m.addEventListener("wheel",function(e){e.preventDefault(),E=(0,a.zoom)(e.offsetX,e.offsetY,e.deltaY,E,{WIDTH:c,HEIGHT:v}),T(),y()});var h=null,w=!1,D=function(e){e.preventDefault(),document.getElementById("output").value=(0,r.evalPoint)(e.offsetX,e.offsetY,E,{WIDTH:c,HEIGHT:v}).toFixed(2),w&&(h&&(E=(0,s.pan)(e.offsetX,e.offsetY,h[0],h[1],E,{WIDTH:c,HEIGHT:v})),h=[e.offsetX,e.offsetY],p(),T(),y())};u?f.addEventListener("mousemove",D):f.addEventListener("mousemove",(0,o.debounce)(D),16),f.addEventListener("mousedown",function(e){w=!0}),i.addEventListener("mousemove",(0,o.debounce)(function(e){e.preventDefault(),document.getElementById("output2").value=(0,r.evalPoint)(e.offsetX,e.offsetY,E,{WIDTH:c,HEIGHT:v}).toFixed(2),w&&(h&&(E=(0,s.pan)(e.offsetX,e.offsetY,h[0],h[1],E,{WIDTH:c,HEIGHT:v})),h=[e.offsetX,e.offsetY],y(),T())}),16),m.addEventListener("mousedown",function(e){w=!0}),m.addEventListener("mousemove",function(e){e.preventDefault(),document.getElementById("output3").value=(0,r.evalPoint)(e.offsetX,e.offsetY,E,{WIDTH:c,HEIGHT:v}).toFixed(2),w&&(h&&(E=(0,s.pan)(e.offsetX,e.offsetY,h[0],h[1],E,{WIDTH:c,HEIGHT:v})),h=[e.offsetX,e.offsetY],y(),T())}),i.addEventListener("mousedown",function(e){w=!0}),document.addEventListener("mouseup",function(e){w=!1,h=null});var Y=!1,y=function(e){console.log("busy",Y),e||!Y?(Y=performance.now(),I.postMessage({bounds:E})):b()},b=(0,o.debounce)(function(){return y(!0)},400);I.onmessage=function(e){if(console.log(e),e.data.done){var t=performance.now();document.getElementById("ms3").value=Math.floor(t-Y),Y=null}};
},{"./utils/HSVtoRGB.js":"GbpT","./shader.js":"Sp40","./utils/iter.js":"A0PK","./utils/debounce.js":"0hCt","./utils/zoom.js":"ruDW","./utils/evalPoint.js":"yEf8","./utils/pan.js":"P0Gq","./worker.js":[["worker.69c87948.js","W/vC"],"worker.69c87948.js.map","W/vC"]}]},{},["H99C"], null)
//# sourceMappingURL=src.3b702d29.js.map